<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon E-Portfolio - Windows XP Edition</title>
    
    <style>
        /*
         * Windows XP Theme CSS
         * Basé sur le style "Luna" (Bleu) et Tahoma
         */

        /* ---------------------------------------------------- */
        /* 1. Général & Police (Tahoma) */
        /* ---------------------------------------------------- */
        :root {
            --xp-blue: #245195;
            --xp-light-blue: #3e81e3;
            --xp-lightest-blue: #70aee4;
            --xp-green: #387b38;
            --xp-light-grey: #f0f0f0;
            --xp-dark-grey: #ccc;
            --xp-border-color: #0a246a;
            --xp-window-bg: #fff;
            --xp-taskbar-color: #245195;
        }

        * {
            box-sizing: border-box;
            /* Police demandée: Tahoma */
            font-family: Tahoma, sans-serif;
            font-size: 11px;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* Empêche le défilement du bureau */
            background-color: #3a6ea5; /* Couleur de secours */
        }

        /* ---------------------------------------------------- */
        /* 2. Le Bureau et Fond d'écran */
        /* ---------------------------------------------------- */
        #desktop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: calc(100vh - 28px); /* Laisse de la place pour la barre des tâches */
            /* Fond d'écran initial demandé */
            background-image: url('https://external-preview.redd.it/r6g38aXSaQWtd1KxwJbQ-Fs5jtSVDxX3wtLHJEdqixw.jpg?auto=webp&s=fdee18de73d4f642ccc323470e044ed0f1bae7ea');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            transition: background-image 0.5s ease;
        }

        /* Styles pour les icônes du bureau */
        .desktop-icons-container {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .desktop-icons-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: flex-start;
        }

        .desktop-icon {
            width: 70px;
            text-align: center;
            cursor: pointer;
            padding: 5px;
            border: 1px solid transparent;
            text-decoration: none;
            color: white;
            text-shadow: 1px 1px #000;
        }

        .desktop-icon:hover {
            background-color: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .desktop-icon img {
            width: 32px;
            height: 32px;
            display: block;
            margin: 0 auto 5px;
            border: none;
            object-fit: cover;
        }

        .desktop-icon span {
            font-size: 10px;
            word-wrap: break-word;
            color: inherit;
            text-shadow: 1px 1px #000;
        }

        /* ---------------------------------------------------- */
        /* 3. La Barre des Tâches (Footer) */
        /* ---------------------------------------------------- */
        #taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 28px;
            background: var(--xp-taskbar-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-top: 1px solid var(--xp-lightest-blue);
            padding: 0 4px;
            z-index: 1000;
        }

        #start-button {
            background: linear-gradient(to right, #4086b9, #3660a9, #2365a6);
            border: 1px solid #163661;
            border-radius: 4px;
            padding: 2px 6px;
            display: flex;
            align-items: center;
            cursor: pointer;
            box-shadow: 1px 1px 1px rgba(0,0,0,0.5);
            margin-right: 6px;
            color: white;
            font-weight: bold;
            font-size: 13px;
            text-shadow: 1px 1px #163661;
        }

        #start-button:hover {
            background: linear-gradient(to right, #5d9ee3, #4a7fd6, #3d79cf);
        }

        .xp-logo {
            width: 18px;
            height: 18px;
            margin-right: 4px;
        }

        #taskbar-windows {
            display: flex;
            flex-grow: 1;
            height: 100%;
            padding: 0 4px;
            overflow: hidden;
        }

        .taskbar-button {
            background: linear-gradient(to bottom, #70aee4, #3e81e3);
            border: 1px solid #0a246a;
            border-top: 1px solid var(--xp-lightest-blue);
            border-left: 1px solid var(--xp-lightest-blue);
            color: black;
            padding: 3px 10px;
            margin-right: 4px;
            height: 24px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 150px;
            cursor: pointer;
            box-shadow: inset 0 0 0 1px #a4c0e3;
        }

        .taskbar-button:hover {
            filter: brightness(1.1);
        }

        .taskbar-button.active {
            background: linear-gradient(to top, #70aee4, #3e81e3); /* Inversé pour un effet enfoncé */
            box-shadow: inset 1px 1px 1px #0a246a;
            border: 1px solid #0a246a;
            border-top: 1px solid #a4c0e3;
            border-left: 1px solid #a4c0e3;
        }

        /* Zone de Notification */
        #notification-area {
            display: flex;
            align-items: center;
            height: 100%;
            background-color: #1b4b8a;
            border-left: 1px solid #70aee4;
            padding: 0 4px;
        }

        #time {
            color: white;
            padding: 0 8px;
            font-size: 11px;
        }

        .taskbar-icon {
            background: none;
            border: none;
            cursor: pointer;
            padding: 2px;
        }

        .taskbar-icon img {
            width: 18px;
            height: 18px;
            vertical-align: middle;
        }

        /* ---------------------------------------------------- */
        /* 4. Fenêtres (Pop-ups) */
        /* ---------------------------------------------------- */
        .window {
            position: absolute;
            top: 50px;
            left: 50px;
            width: 600px;
            max-height: calc(100vh - 80px); /* Taille max pour laisser de la place à la barre des tâches */
            min-height: 200px;
            background-color: var(--xp-window-bg);
            border: 1px solid var(--xp-border-color);
            box-shadow: 4px 4px 10px rgba(0,0,0,0.5);
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .window.hidden {
            display: none;
        }

        .window.minimized {
            display: none; 
        }

        /* Fenêtres spéciales pour les images (Présentation, Matrices) */
        .large-image-window {
            width: 800px;
            max-width: 90%;
            height: 90%;
            min-height: 400px;
        }

        .window-image-content {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 !important;
        }

        .window-image-content img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
            border-radius: 0;
        }

        .title-bar {
            background: linear-gradient(to right, var(--xp-blue), var(--xp-light-blue));
            color: white;
            padding: 2px 4px;
            height: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: grab;
            flex-shrink: 0;
        }

        .title-bar-text {
            font-weight: bold;
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-grow: 1;
        }

        .title-bar-controls button {
            background: #e3e3e3;
            border: 1px solid #163661;
            color: black;
            width: 16px;
            height: 16px;
            padding: 0;
            margin-left: 2px;
            font-size: 10px;
            line-height: 10px;
            cursor: pointer;
            box-shadow: 1px 1px 0 rgba(255, 255, 255, 0.7) inset, -1px -1px 0 rgba(0, 0, 0, 0.5) inset;
        }

        .title-bar-controls button:hover {
            filter: brightness(1.1);
        }

        .title-bar-controls button:active {
            box-shadow: -1px -1px 0 rgba(255, 255, 255, 0.7) inset, 1px 1px 0 rgba(0, 0, 0, 0.5) inset;
        }

        .window-body {
            padding: 10px;
            background-color: var(--xp-light-grey);
            flex-grow: 1;
            overflow-y: auto;
        }

        /* ---------------------------------------------------- */
        /* 5. Styles de Contenu */
        /* ---------------------------------------------------- */

        .subject-button {
            display: block;
            width: 100%;
            padding: 4px 8px;
            margin-bottom: 5px;
            text-align: left;
            background: linear-gradient(to bottom, #e3e3e3, #c9c9c9);
            color: black;
            border: 1px solid #0a246a;
            border-top: 1px solid var(--xp-window-bg);
            border-left: 1px solid var(--xp-window-bg);
            border-radius: 0;
            cursor: pointer;
            transition: background-color 0.1s;
            text-decoration: none;
            box-shadow: 1px 1px 0 rgba(255, 255, 255, 0.7) inset, -1px -1px 0 rgba(0, 0, 0, 0.5) inset;
        }

        .subject-button:hover {
            background: linear-gradient(to top, #70aee4, #3e81e3);
            color: white;
            border: 1px solid #0a246a;
        }

        .window-body table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .window-body th, .window-body td {
            border: 1px solid #999;
            padding: 5px;
            text-align: left;
            color: black;
            background-color: white;
        }

        .window-body th {
            background-color: #ddd;
        }

        /* Texte Arabe */
        .arabic-text {
            direction: rtl;
            text-align: right;
            font-family: Tahoma, sans-serif;
        }

        /* Styles pour la section ADA */
        .ada-display-content {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #999;
            background-color: white;
            border-radius: 0;
            font-size: 11px;
        }

        /* ---------------------------------------------------- */
        /* 6. Section Paramètres et Fonds d'écran */
        /* ---------------------------------------------------- */

        #wallpaper-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #999;
        }

        .wallpaper-thumb {
            width: 100px;
            height: 60px;
            border: 2px solid #fff;
            cursor: pointer;
            transition: border-color 0.2s;
            background-size: cover;
            background-position: center;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }

        .wallpaper-thumb:hover {
            border-color: var(--xp-light-blue);
        }

        .wallpaper-thumb.selected {
            border-color: var(--xp-green);
            border-width: 3px;
        }
    </style>
</head>
<body>

    <div id="desktop">
        
        <div class="desktop-icons-container">
            <div class="desktop-icons-group">
                <a href="#" onclick="openWindow('presentation-window')" id="presentation-icon" class="desktop-icon">
                    <img src="https://i.imgur.com/MB6dKKu.jpeg" alt="Moi">
                    <span>Présentation</span>
                </a>
                <a href="#" onclick="openWindow('ib-resources-window')" id="ib-resources-icon" class="desktop-icon">
                    <img src="https://www.sek.es/wp-content/uploads/colegio-del-mundo-IB.jpg" alt="Ressources IB transversales">
                    <span>Ressources IB</span>
                </a>
                <a href="#" onclick="openWindow('matieres-window')" id="matières-icon" class="desktop-icon">
                    <img src="https://static.vecteezy.com/ti/vecteur-libre/p1/1736348-ensemble-objets-et-fournitures-scolaires-vectoriel.jpg" alt="Matières">
                    <span>Matières</span>
                </a>
                <a href="#" onclick="openWindow('interdisciplinarite-window')" id="interdisciplinarité-icon" class="desktop-icon">
                    <img src="https://lejournal.cnrs.fr/sites/default/files/styles/lightbox-hd/public/assets/images/fotolia_84475014_72dpi.jpg?itok=bTerM_re" alt="Interdisciplinarité">
                    <span>Interdisciplinarité</span>
                </a>
                <a href="#" onclick="openWindow('ada-window')" id="ada-icon" class="desktop-icon">
                    <img src="https://andrepiolat.csf.bc.ca/wp-content/uploads/sites/5/images/cerclePEI.jpg" alt="Approches de l'apprentissage">
                    <span>Approches de l'apprentissage (ADA)</span>
                </a>
            </div>

            <div class="desktop-icons-group">
                <a href="#" onclick="openWindow('developpement-personnel-window')" id="developpement-personnel-icon" class="desktop-icon">
                    <img src="https://cityzen-mineraux.fr/-_-/res/191371ed-efcf-4f38-bf28-da05f0d803f9/images/files/191371ed-efcf-4f38-bf28-da05f0d803f9/0ea7d308-01ce-4c5f-9674-19bffa309317/1024-1024/b79417cfa987687d0044778ae703d4f1861e5d8a" alt="Développement personnel">
                    <span>Développement personnel</span>
                </a>
                <a href="#" onclick="openWindow('politiques-reglements-window')" id="politiques-reglements-icon" class="desktop-icon">
                    <img src="https://www.univ-lyon2.fr/medias/photo/illus-reglement_1598966170063-jpg" alt="Politiques et règlements">
                    <span>Politiques et règlements</span>
                </a>
            </div>
            
            <div class="desktop-icons-group">
                <a href="#" onclick="openWindow('settings-window')" class="desktop-icon">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Windows_Settings_icon.svg/2184px-Windows_Settings_icon.svg.png" alt="Settings">
                    <span>Paramètres</span>
                </a>
            </div>
        </div>

        <div id="settings-window" class="window hidden">
            <div class="title-bar">
                <div class="title-bar-text">Paramètres d'affichage</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('settings-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('settings-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('settings-window')"></button>
                </div>
            </div>
            <div class="window-body">
                <h3>Changer le Fond d'Écran</h3>
                <div id="wallpaper-options">
                    </div>
            </div>
        </div>

        <div id="presentation-window" class="window hidden large-image-window">
            <div class="title-bar">
                <div class="title-bar-text">Présentation</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('presentation-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('presentation-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('presentation-window')"></button>
                </div>
            </div>
            <div class="window-body window-image-content">
                <img src="https://i.imgur.com/pap2vFu.png" alt="Présentation">
            </div>
        </div>

        <div id="matrices-comportement-window" class="window hidden large-image-window">
            <div class="title-bar">
                <div class="title-bar-text">Matrices des comportements</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('matrices-comportement-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('matrices-comportement-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('matrices-comportement-window')"></button>
                </div>
            </div>
            <div class="window-body window-image-content">
                <img src="https://i.imgur.com/Vo8zG9W.jpeg" alt="Matrices des comportements">
            </div>
        </div>

        <div id="ib-resources-window" class="window hidden">
            <div class="title-bar">
                <div class="title-bar-text">Ressources IB transversales</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('ib-resources-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('ib-resources-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('ib-resources-window')"></button>
                </div>
            </div>
            <div class="window-body">
                <h2 style="text-align: center;">Ressources IB transversales</h2>
                <div id="ib-resources-content" class="modal-text">
                    <h3 style="margin-top: 0;">Contextes mondiaux</h3>
                    <ul>
                        <li>Identités et relations</li>
                        <li>Orientation dans le temps et l'espace</li>
                        <li>Innovation scientifique et technique</li>
                        <li>Mondialisation et durabilité</li>
                        <li>Équité et développement</li>
                        <li>Expression personnelle et culturelle</li>
                    </ul>
                    <hr>
                    <h3>Profil de l'apprenant</h3>
                    <ul>
                        <li>Chercheurs</li>
                        <li>Informés</li>
                        <li>Sensés</li>
                        <li>Communicatifs</li>
                        <li>Intègres</li>
                        <li>Ouverts d'esprit</li>
                        <li>Altruistes</li>
                        <li>Audacieux</li>
                        <li>Équilibrés</li>
                        <li>Réfléchis</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="matieres-window" class="window hidden">
            <div class="title-bar">
                <div class="title-bar-text">Matières</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('matieres-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('matieres-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('matieres-window')"></button>
                </div>
            </div>
            <div class="window-body">
                <h2 id="matiere-title" style="text-align: center;">Matières</h2>
                <div id="matiere-content-container" class="modal-text">
                    </div>
            </div>
        </div>

        <div id="interdisciplinarite-window" class="window hidden">
            <div class="title-bar">
                <div class="title-bar-text">Interdisciplinarité</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('interdisciplinarite-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('interdisciplinarite-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('interdisciplinarite-window')"></button>
                </div>
            </div>
            <div class="window-body">
                <h2 id="interdis-title" style="text-align: center;">Interdisciplinarité</h2>
                <div id="interdis-content" class="modal-text">
                    </div>
            </div>
        </div>

        <div id="ada-window" class="window hidden">
            <div class="title-bar">
                <div class="title-bar-text">Approches de l'apprentissage (ADA)</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('ada-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('ada-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('ada-window')"></button>
                </div>
            </div>
            <div class="window-body">
                <h2 id="ada-title" style="text-align: center;">Approches de l'apprentissage (ADA)</h2>
                <div id="ada-content" class="modal-text">
                    </div>
            </div>
        </div>

        <div id="developpement-personnel-window" class="window hidden">
            <div class="title-bar">
                <div class="title-bar-text">Développement personnel</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('developpement-personnel-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('developpement-personnel-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('developpement-personnel-window')"></button>
                </div>
            </div>
            <div class="window-body">
                <h2 style="text-align: center;">Développement personnel</h2>
                <div class="modal-text">
                    <p>On nous a pas encore dit quoi écrire ici</p>
                </div>
            </div>
        </div>

        <div id="politiques-reglements-window" class="window hidden">
            <div class="title-bar">
                <div class="title-bar-text">Politiques et règlements</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize" onclick="minimizeWindow('politiques-reglements-window')"></button>
                    <button aria-label="Maximize" onclick="maximizeWindow('politiques-reglements-window')"></button>
                    <button aria-label="Close" onclick="closeWindow('politiques-reglements-window')"></button>
                </div>
            </div>
            <div class="window-body">
                <h2 id="politiques-reglements-title" style="text-align: center;">Politiques et règlements</h2>
                <div id="politiques-reglements-content" class="modal-text">
                    </div>
            </div>
        </div>

    </div> <footer id="taskbar">
        <div id="start-button">
            <a href="https://almadina.ma" style="display: flex; text-decoration: none; color: white;">
                <img src="https://upload.wikimedia.org/wikipedia/commons/e/e4/Windows_XP_logo.svg" alt="XP Logo" class="xp-logo">
                <span>démarrer</span>
            </a>
        </div>
        
        <div id="taskbar-windows">
            </div>

        <div id="notification-area">
            <button id="settings-icon" class="taskbar-icon" onclick="openWindow('settings-window')">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Windows_Settings_icon.svg/32px-Windows_Settings_icon.svg.png" alt="Settings Icon">
            </button>
            <div id="time">7:06 PM</div>
        </div>
    </footer>
    
    <script>
        const desktop = document.getElementById('desktop');
        const taskbarWindows = document.getElementById('taskbar-windows');

        // Liste des URLs pour les fonds d'écran (Demandées par l'utilisateur)
        const wallpaperUrls = [
            'https://external-preview.redd.it/r6g38aXSaQWtd1KxwJbQ-Fs5jtSVDxX3wtLHJEdqixw.jpg?auto=webp&s=fdee18de73d4f642ccc323470e044ed0f1bae7ea',
            'https://images3.alphacoders.com/135/1354129.jpeg',
            'https://images.hdqwalls.com/wallpapers/bliss-windows-xp-remastered-2025-5k-vt.jpg',
            'https://images8.alphacoders.com/136/1360352.png',
            'https://getwallpapers.com/wallpaper/full/1/8/3/1226267-windows-xp-wallpaper-1920x1080-for-4k-monitor.jpg',
            'https://images.hdqwalls.com/wallpapers/windows-xp-bliss-dark-ia.jpg'
        ];
        let zIndexCounter = 100;
        let isDragging = false;
        let dragWin = null;
        let offset = { x: 0, y: 0 };

        // ----------------------------------------------------
        // Contenu Spécifique (Repris de votre JS)
        // ----------------------------------------------------

        const reglementContent = `
            <div class="arabic-text">
                <p>• أنا لا أضيع أدواتي المدرسية، وأحرص على إحضارها باستمرار، لأنها مكون رئيس من مكونات تعليمي.</p>
                <p>• كي أكون منظما و أمينا ، أعيد التجهيزات التي استعملتها إلى مكانها أو إلى حالتها الأولى حتى أستفيد منها مرة أخرى</p>
                <br>
                <p>في مدارس المدينة، نؤمن أن السلوك القويم ضروري لضمان الظروف الملائمة للحياة الجماعية</p>
                <p>في مدارس المدينة نشجع على الالتزام بقانون الحياة ولا نقبل الإخلال به</p>
                <br>
                <h3>المساعــــدات</h3>
                <ul>
                    <li>ألتقي بالأستاذ الرئيسي لإيجاد حلول لتقويم سلوكي</li>
                    <li>أقوم بإعداد رسالة اعتذار.</li>
                </ul>
                <br>
                <h3>العواقب السلبيــــــة</h3>
                <ul>
                    <li>أخجل من نفسي وأكون بحالة نفسية سيئة</li>
                    <li>تحتفظ المؤسسة بحقها الكامل في اتخاذ العقوبات الزجرية الملائمة لتقويم سلوكي وتصرفاتي...</li>
                </ul>
                <br>
                <h3>الحوافــــــز</h3>
                <ul>
                    <li>أنا فخور بنفسي أكون سعيدا</li>
                    <li>أستفيد من خرجة خاصة تنظمها المؤسسة</li>
                </ul>
                <br>
                <table>
                    <thead>
                        <tr>
                            <th>السلوك</th>
                            <th>العقوبة</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>العلكة</td>
                            <td>أول مرة : إندار شفوي<br>ثاني مرة: حجر من 12س إلى 12س 30د</td>
                        </tr>
                        <tr>
                            <td>الغش</td>
                            <td>- إذا كان التلميذ قد شرع في الغش، يحصل على صفر مع إخبار الآباء</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <a href="#" class="subject-button back-button" style="text-align: center;">Retour</a>
        `;

        const matiereListHTML = `
            <a href="#" class="subject-button" data-matiere="Français">Français</a>
            <a href="#" class="subject-button" data-matiere="Arabe">Arabe</a>
            <a href="#" class="subject-button" data-matiere="Mathématiques">Mathématiques</a>
            <a href="#" class="subject-button" data-matiere="Éducation islamique">Éducation islamique</a>
            <a href="#" class="subject-button" data-matiere="Sciences de la Vie et de la Terre">Sciences de la Vie et de la Terre</a>
            <a href="#" class="subject-button" data-matiere="Anglais">Anglais</a>
            <a href="#" class="subject-button" data-matiere="Physique chimie">Physique chimie</a>
            <a href="#" class="subject-button" data-matiere="Informatique/Robotique">Informatique/Robotique</a>
            <a href="#" class="subject-button" data-matiere="Histoire-Géographie">Histoire-Géographie</a>
            <a href="#" class="subject-button" data-matiere="Design">Design</a>
            <a href="#" class="subject-button" data-matiere="Service communautaire">Service communautaire</a>
            <a href="#" class="subject-button" data-matiere="Éducation artistique">Éducation artistique</a>
            <a href="#" class="subject-button" data-matiere="Théâtre">Théâtre</a>
            <a href="#" class="subject-button">Professeur Principal</a>
            <a href="#" class="subject-button">Arts plastiques</a>
        `;

        const matiereDetailsHTML = `
            <a href="#" class="subject-button" data-action="objectifs">Les objectifs de la matière</a>
            <a href="#" class="subject-button" data-action="criteres">Les critères d'évaluation</a>
            <a href="#" class="subject-button" data-action="concepts">Les concepts étudiés</a>
            <a href="#" class="subject-button" data-action="reflexions">Les réflexions des élèves sur les apprentissages et la compréhension conceptuelle, ainsi que les axes de progrès identifiés suite à chaque unité</a>
            <a href="#" class="subject-button back-button">Retour aux matières</a>
        `;
        
        const adaContentData = {
            "presentation": `
                <h3>Domaines et sous-domaines des ADA</h3>
                <ul>
                    <li><strong>Recherche :</strong><ul><li>Culture de l'information</li><li>Culture des médias</li></ul></li>
                    <li><strong>Dimension Sociale :</strong><ul><li>Collaboration</li></ul></li>
                    <li><strong>Communication :</strong><ul><li>Communication</li></ul></li>
                    <li><strong>Autogestion :</strong><ul><li>Organisation</li><li>Compétences affectives</li><li>Compétences de réflexion</li></ul></li>
                    <li><strong>Pensée :</strong><ul><li>Pensée critique</li><li>Pensée créative</li><li>Transfert</li></ul></li>
                </ul>
            `,
            "application": `<p>Contenu sur l'application des compétences en classe et dans la vie quotidienne. Ce contenu pourrait inclure des exemples de projets, des études de cas ou des activités pratiques.</p>`,
            "reflexion": `<p>Contenu sur la réflexion des élèves sur leurs apprentissages et les stratégies qu'ils ont mises en œuvre. Ce contenu pourrait inclure des grilles d'auto-évaluation ou des exemples de journaux de bord.</p>`
        };

        // ----------------------------------------------------
        // 1. Initialisation & Gestion du Temps
        // ----------------------------------------------------

        document.addEventListener('DOMContentLoaded', () => {
            initializeWallpaperOptions();
            updateTime();
            setInterval(updateTime, 1000);
            makeWindowsDraggable();
            
            // Initialise les états de contenu
            document.getElementById("matiere-content-container").innerHTML = matiereListHTML;
            showInterdisMainContent();
            showPolitiquesReglementsMainContent();
            showAdaMainContent();
        });

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('fr-FR', {
                hour: 'numeric',
                minute: '2-digit',
                hour12: false
            });
            document.getElementById('time').textContent = timeString;
        }

        // ----------------------------------------------------
        // 2. Fonctions de Fenêtre (XP Style)
        // ----------------------------------------------------

        function openWindow(windowId) {
            const win = document.getElementById(windowId);
            const taskbarButtonId = 'task-' + windowId.replace('-window', '');
            
            // Créer le bouton dans la barre des tâches s'il n'existe pas
            if (!document.getElementById(taskbarButtonId)) {
                const titleText = win.querySelector('.title-bar-text').textContent;
                const button = document.createElement('button');
                button.id = taskbarButtonId;
                button.className = 'taskbar-button';
                button.textContent = titleText;
                button.onclick = () => toggleWindow(windowId);
                taskbarWindows.appendChild(button);
            }
            
            win.classList.remove('hidden', 'minimized');
            focusWindow(windowId);
        }

        function closeWindow(windowId) {
            const win = document.getElementById(windowId);
            win.classList.add('hidden');
            
            // Supprimer le bouton de la barre des tâches
            const taskbarButtonId = 'task-' + windowId.replace('-window', '');
            const taskbarButton = document.getElementById(taskbarButtonId);
            if (taskbarButton) {
                taskbarButton.remove();
            }
            
            // Trouver la prochaine fenêtre à activer (si elle existe)
            const nextWin = document.querySelector('.window:not(.hidden):not(.minimized)');
            if (nextWin) {
                focusWindow(nextWin.id);
            }
        }

        function minimizeWindow(windowId) {
            const win = document.getElementById(windowId);
            win.classList.add('minimized');
            
            const taskbarButton = document.getElementById('task-' + windowId.replace('-window', ''));
            if (taskbarButton) {
                taskbarButton.classList.remove('active');
            }
        }

        function toggleWindow(windowId) {
            const win = document.getElementById(windowId);
            if (win.classList.contains('hidden') || win.classList.contains('minimized')) {
                // Est caché/minimisé, on restaure/ouvre
                win.classList.remove('hidden', 'minimized');
                focusWindow(windowId);
            } else {
                // Est ouvert, on minimise
                minimizeWindow(windowId);
            }
        }
        
        function maximizeWindow(windowId) {
            // Fonctionnalité non implémentée mais nécessaire pour les boutons
            console.log(`Fenêtre ${windowId} maximisée (non implémenté)`);
        }

        function focusWindow(windowId) {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('active'));
            document.querySelectorAll('.taskbar-button').forEach(b => b.classList.remove('active'));

            const win = document.getElementById(windowId);
            win.classList.add('active');
            win.style.zIndex = ++zIndexCounter;

            const taskbarButton = document.getElementById('task-' + windowId.replace('-window', ''));
            if (taskbarButton) {
                taskbarButton.classList.add('active');
            }
        }

        function makeWindowsDraggable() {
            document.querySelectorAll('.window').forEach(win => {
                const titleBar = win.querySelector('.title-bar');
                if (!titleBar) return;

                titleBar.addEventListener('mousedown', (e) => {
                    if (e.target.closest('.title-bar-controls')) return;
                    
                    isDragging = true;
                    dragWin = win;
                    focusWindow(win.id);
                    offset.x = e.clientX - win.offsetLeft;
                    offset.y = e.clientY - win.offsetTop;
                    titleBar.style.cursor = 'grabbing';
                    e.preventDefault();
                });
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging || !dragWin) return;

                let newX = e.clientX - offset.x;
                let newY = e.clientY - offset.y;

                const desktopHeight = desktop.offsetHeight;
                const desktopWidth = desktop.offsetWidth;
                const winWidth = dragWin.offsetWidth;
                const winHeight = dragWin.offsetHeight;

                newX = Math.max(0, Math.min(newX, desktopWidth - winWidth));
                newY = Math.max(0, Math.min(newY, desktopHeight - winHeight));
                
                dragWin.style.left = newX + 'px';
                dragWin.style.top = newY + 'px';
            });

            document.addEventListener('mouseup', () => {
                if (isDragging && dragWin) {
                    dragWin.querySelector('.title-bar').style.cursor = 'grab';
                }
                isDragging = false;
                dragWin = null;
            });
        }

        // ----------------------------------------------------
        // 3. Gestion du Fond d'Écran (Section Paramètres)
        // ----------------------------------------------------

        function initializeWallpaperOptions() {
            const container = document.getElementById('wallpaper-options');
            wallpaperUrls.forEach(url => {
                const thumb = document.createElement('div');
                thumb.className = 'wallpaper-thumb';
                thumb.style.backgroundImage = `url('${url}')`;
                thumb.dataset.url = url;
                thumb.onclick = () => selectWallpaper(url, thumb);
                container.appendChild(thumb);
            });

            // Sélectionner la vignette initiale
            selectWallpaper(wallpaperUrls[0], document.querySelector(`.wallpaper-thumb[data-url='${wallpaperUrls[0]}']`));
        }

        function selectWallpaper(url, element) {
            desktop.style.backgroundImage = `url('${url}')`;

            // Mettre à jour la classe 'selected'
            document.querySelectorAll('.wallpaper-thumb').forEach(thumb => {
                thumb.classList.remove('selected');
            });
            if (element) {
                element.classList.add('selected');
            }
        }

        // ----------------------------------------------------
        // 4. Gestion du Contenu Dynamique
        // ----------------------------------------------------

        function showAdaMainContent() {
            const adaContent = document.getElementById("ada-content");
            adaContent.innerHTML = `
                <a href="#" class="subject-button" data-ada="presentation">Présentation des cinq domaines de compétence ADA ainsi que leurs sous domaines</a>
                <a href="#" class="subject-button" data-ada="application">Application des compétences</a>
                <a href="#" class="subject-button" data-ada="reflexion">Réflexion sur les compétences ADA développées et les stratégies mises en oeuvre</a>
                <div class="ada-display-content"></div>
            `;
        }

        function showInterdisMainContent() {
            const interdisContent = document.getElementById("interdis-content");
            interdisContent.innerHTML = `
                <a href="#" class="subject-button" data-unit="Unité 1">Unité 1</a>
                <a href="#" class="subject-button" data-unit="Unité 2">Unité 2</a>
            `;
        }

        function showPolitiquesReglementsMainContent() {
            const politiquesReglementsContent = document.getElementById("politiques-reglements-content");
            politiquesReglementsContent.innerHTML = `
                <a href="https://www.ibo.org/globalassets/new-structure/programmes/shared-resources/pdfs/academic-integrity-policy-fr.pdf" target="_blank" class="subject-button">Politique d'intégrité</a>
                <a href="#" class="subject-button" data-reglement="Règlement">Règlement</a>
                <a href="#" class="subject-button" data-reglement="Matrices">Matrices de l'enseignement des comportements</a>
            `;
        }

        // Événements (Utilisation de la délégation pour les fenêtres)
        document.addEventListener('click', (event) => {
            const clickedElement = event.target.closest('.subject-button');
            if (!clickedElement) return;

            const currentWindow = clickedElement.closest('.window');
            if (!currentWindow) return;

            event.preventDefault();

            // Gestion de la fenêtre Matières
            if (currentWindow.id === 'matieres-window') {
                const matiereTitle = document.getElementById("matiere-title");
                const matiereContentContainer = document.getElementById("matiere-content-container");

                if (clickedElement.dataset.matiere) {
                    matiereTitle.textContent = clickedElement.dataset.matiere;
                    matiereContentContainer.innerHTML = matiereDetailsHTML;
                } else if (clickedElement.classList.contains("back-button")) {
                    matiereTitle.textContent = "Matières";
                    matiereContentContainer.innerHTML = matiereListHTML;
                }
            }
            
            // Gestion de la fenêtre Interdisciplinarité
            if (currentWindow.id === 'interdisciplinarite-window') {
                const interdisTitle = document.getElementById("interdis-title");
                const interdisContent = document.getElementById("interdis-content");

                if (clickedElement.dataset.unit) {
                    interdisTitle.textContent = clickedElement.dataset.unit;
                    interdisContent.innerHTML = `
                        <a href="#" class="subject-button">Produit final</a>
                        <a href="#" class="subject-button">Réflexion</a>
                        <br>
                        <a href="#" class="subject-button back-button">Retour</a>
                    `;
                } else if (clickedElement.classList.contains("back-button")) {
                    interdisTitle.textContent = "Interdisciplinarité";
                    showInterdisMainContent();
                }
            }

            // Gestion de la fenêtre ADA
            if (currentWindow.id === 'ada-window') {
                const adaCategory = clickedElement.dataset.ada;
                const displayContent = currentWindow.querySelector(".ada-display-content");
                
                if (adaCategory && adaContentData[adaCategory]) {
                    displayContent.innerHTML = adaContentData[adaCategory];
                }
            }
            
            // Gestion de la fenêtre Politiques et règlements
            if (currentWindow.id === 'politiques-reglements-window') {
                const politiquesReglementsTitle = document.getElementById("politiques-reglements-title");
                const politiquesReglementsContent = document.getElementById("politiques-reglements-content");
                const reglementCategory = clickedElement.dataset.reglement;
                
                if (reglementCategory === "Règlement") {
                    politiquesReglementsTitle.textContent = "Règlement";
                    politiquesReglementsContent.innerHTML = reglementContent;
                } else if (reglementCategory === "Matrices") {
                    // Ouvre la fenêtre des matrices et ferme la fenêtre actuelle
                    closeWindow('politiques-reglements-window');
                    openWindow('matrices-comportement-window');
                } else if (clickedElement.classList.contains("back-button")) {
                    politiquesReglementsTitle.textContent = "Politiques et règlements";
                    showPolitiquesReglementsMainContent();
                }
            }
        });
    </script>
</body>
</html>
